(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"0748":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-table",{attrs:{data:e.data||e.computedData.data||e.computedData,loading:e.loading,"row-key":e.table.rowKey,pagination:e.pagination,columns:e.table.columns,"rows-per-page-options":e.table.options,"binary-state-sort":e.table.binaryStateSort,"visible-columns":e.table.visibleColumns,flat:e.table.flat,dense:""},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top-left",fn:function(){return[a("div",{staticClass:"text-h4 text-grey-6"},[e.table.back?a("q-btn",{staticClass:"q-mr-sm",staticStyle:{"margin-top":"-11px"},attrs:{icon:"keyboard_arrow_left",color:"grey-5",to:e.table.back.to,disable:e.loading,dense:""}}):e._e(),e._v("\n        "+e._s(e.label||e.table.label)+"\n      ")],1)]},proxy:!0},e.table.addForm?{key:"top-right",fn:function(){return[e.table.search?a("q-input",{staticClass:"q-mr-md",attrs:{inactive:e.loading,placeholder:"Search",dense:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData({pagination:e.table.pagination})}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}):e._e(),a("div",[a("q-btn",{attrs:{label:e.addLabel||e.table.addLabel,color:"primary",icon:"add"},on:{click:function(t){e.table.addForm.show=!0}}})],1)]},proxy:!0}:null,{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},e._l(e.table.columns,(function(r){return a("q-td",{key:r.name,style:"center"==r.align?"padding-right: 31px;":"",attrs:{props:t,"auto-width":r.autoWidth}},["edit"==r.type?a("span",[r.additional?a("span",e._l(r.additional,(function(r,n){return a("span",{key:n},["button"==r.type?a("q-btn",{class:r.params.class,attrs:{disable:e.loading,to:{name:r.params.toName,params:{id:t.row.id,label:"try"}},icon:r.params.icon,color:r.params.color,label:r.params.label,clickable:"",dense:""}},[r.params.tooltip?a("q-tooltip",{attrs:{"content-class":"bg-dark","content-style":"font-size:14px;padding-top:4px;",offset:[0,3]}},[e._v("\n                    "+e._s(r.params.tooltip)+"\n                  ")]):e._e()],1):e._e()],1)})),0):e._e(),a("q-btn",{attrs:{disable:e.loading,icon:"edit",color:"warning",clickable:"",dense:""},on:{click:function(a){e.table.editForm.row=t.row,e.table.editForm.show=!0}}},[a("q-tooltip",{attrs:{"content-class":"bg-dark","content-style":"font-size:14px;padding-top:4px;",offset:[0,3]}},[e._v("\n                Edit\n              ")])],1)],1):"check"==r.type?a("span",[a("q-icon",{staticClass:"text-h5 text-weight-bold",attrs:{name:t.row[r.key.check]?"check":"close",color:t.row[r.key.check]?"positive":"grey"}})],1):"tooled"==r.type?a("span",[e._v("\n            "+e._s(e.toolGetter(r,t))+"\n          ")]):"tooled-basis"==r.type?a("span",[e._v("\n            "+e._s(e.getBasis(t,r))+"\n          ")]):a("span",[e._v("\n            "+e._s("[object Function]"==={}.toString.call(r.field)?r.field(t.row):t.row[r.name])+"\n          ")])])})),1)]}}],null,!0)}),e.table.addForm?a("Dialog",{attrs:{user:e.user,self:e.table,dialog:e.table.addForm,dataId:e.dataId,addFormLabel:e.addFormLabel},scopedSlots:e._u([{key:"topRights",fn:function(){return[e._t("addFormTopRight")]},proxy:!0}],null,!0)}):e._e(),e.table.editForm?a("Dialog",{attrs:{user:e.user,self:e.table,dialog:e.table.editForm,dataId:e.dataId,dataWithParams:e.dataWithParams}}):e._e()],1)},n=[],o=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("7514"),a("c47a")),i=a.n(o),s=a("967e"),l=a.n(s),c=(a("96cf"),a("fa84")),u=a.n(c),d=a("1c16"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["toggle-groups"==e.dialog.type?a("div",[a("q-dialog",{attrs:{persistent:"","transition-show":"fade","transition-hide":"fade"},model:{value:e.dialog.show,callback:function(t){e.$set(e.dialog,"show",t)},expression:"dialog.show"}},[a("q-card",{style:e.dialog.style},[a("q-card-section",[e.dialog.requirements[0]?a("div",{staticClass:"text-h6 text-grey"},[e._v("\n            "+e._s(e.dialog.requirements[0].name)+"\n          ")]):e._e()]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"70vh"}},[a("form",{staticClass:"q-gutter-sm",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},e._l(e.dialog.tool[0],(function(t,r){return a("div",{key:r,staticClass:"q-mb-lg q-ml-md"},[a("div",{staticClass:"text-h6 text-grey-9"},[e._v(e._s(t.name))]),e.dialog.requirements[0]?a("span",{staticClass:"row"},e._l(t.module_actions,(function(t,r){return a("q-toggle",{key:r,staticClass:"q-mt-sm text-grey-9 col-12 ",attrs:{disable:e.loading,val:t.id,label:t.name,color:"green",dense:""},model:{value:e.dialog.requirements[0].module_actions,callback:function(t){e.$set(e.dialog.requirements[0],"module_actions",t)},expression:"dialog.requirements[0].module_actions"}})})),1):e._e()])})),0)]),a("q-separator"),a("q-card-actions",{staticClass:"row"},[a("div",{staticClass:"col-12"},e._l(e.dialog.actions,(function(t,r){return a("q-btn",{key:r,class:t.class,attrs:{flat:t.flat,disable:e.loading,loading:e.loading&&t.loading,label:t.label,color:t.color,icon:t.icon,dense:""},on:{click:function(a){return e.actions(t)}}})})),1)])],1)],1)],1):a("div",[a("q-dialog",{attrs:{persistent:"","transition-show":"fade","transition-hide":"fade"},model:{value:e.dialog.show,callback:function(t){e.$set(e.dialog,"show",t)},expression:"dialog.show"}},[a("q-card",{style:e.dialog.style},[a("q-card-section",{staticClass:"flex justify-between"},[a("div",{staticClass:"text-h5 text-grey"},[e._v("\n            "+e._s(e.addFormLabel||e.dialog.label)+"\n          ")]),e._t("topRights")],2),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"70vh"}},[a("q-form",{staticClass:"q-gutter-xs",attrs:{loading:e.loading},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)},keydown:function(t){return e.error.clear(t.target.name)}}},e._l(e.dialog.requirements,(function(t,r){return a("div",{key:r,class:e.dialog.requirementClass},e._l(e.dialog.template,(function(r,n){return a("div",{key:n,class:r.class},["date"==r.variety?a("span",[a("q-input",{style:r.style,attrs:{disable:e.loading,label:r.label,"error-message":e.error.get(r.name),error:e.error.has(r.name),required:r.required,outlined:r.outlined,"emit-value":r.emitValue,"map-options":r.mapOptions,mask:r.mask,filled:r.filled,dense:""},on:{focus:function(t){return e.error.clear(r.name)}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",[a("q-date",{attrs:{"default-year-month":r.defaultYearMonth,rules:["date"],mask:"YYYY-MM-DD","lazy-rule":""},model:{value:t[r.model],callback:function(a){e.$set(t,r.model,a)},expression:"requirement[template.model]"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t[r.model],callback:function(a){e.$set(t,r.model,a)},expression:"requirement[template.model]"}})],1):e._e(),"text"==r.variety?a("span",[a("q-input",{style:r.style,attrs:{disable:e.loading,label:r.label,"error-message":e.error.get(r.name),error:e.error.has(r.name),name:r.name,type:r.type,filled:r.filled,required:r.required,outlined:r.outlined,"emit-value":r.emitValue,"map-options":r.mapOptions,mask:r.mask,"fill-mask":r.mask?"#":"",maxlength:r.max,dense:""},model:{value:t[r.model],callback:function(a){e.$set(t,r.model,a)},expression:"requirement[template.model]"}})],1):e._e(),"select"==r.variety?a("span",[a("q-select",{style:r.style,attrs:{disable:e.loading,label:r.label,"error-message":e.error.get(r.name),error:e.error.has(r.name),name:r.name,"option-value":r.optionValue,"option-label":r.optionLabel,options:e.$store.getters[r.options.getters],required:r.required,filled:r.filled,outlined:r.outlined,"emit-value":r.emitValue,"map-options":r.mapOptions,dense:""},model:{value:t[r.model],callback:function(a){e.$set(t,r.model,a)},expression:"requirement[template.model]"}})],1):e._e(),"select-basis"==r.variety?a("span",[a("q-select",{style:r.style,attrs:{disable:e.loading,label:r.label,"error-message":e.error.get(r.name),error:e.error.has(r.name),name:r.name,"option-value":r.optionValue,"option-label":r.optionLabel,options:e.getBasis(t,r),required:r.required,filled:r.filled,outlined:r.outlined,"emit-value":r.emitValue,"map-options":r.mapOptions,dense:""},model:{value:t[r.model],callback:function(a){e.$set(t,r.model,a)},expression:"requirement[template.model]"}})],1):e._e(),"input-select"==r.variety?a("span",[a("q-input",{attrs:{dense:"",label:r.label,error:e.error.has(r.name),"error-message":e.error.get(r.name),mask:r.mask,"fill-mask":r.mask?"#":"",disable:e.loading,filled:r.filled},on:{change:function(a){e.error.clear(r.name),t[r.model]=r.mask_model(t,r)},keydown:function(a){e.error.clear(r.name),t[r.model]=r.mask_model(t,r)}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-select",{staticClass:"input-select",attrs:{dense:"",disable:e.loading,options:e.$store.getters[r.options.getters],"option-value":r.optionValue,"option-label":r.optionLabel,"emit-value":r.emitValue,"map-options":r.mapOptions},on:{blur:function(e){t[r.model]=r.mask_model(t,r)},focus:function(a){e.error.clear(r.name),t[r.model]=r.mask_model(t,r)}},model:{value:t[r.select_model],callback:function(a){e.$set(t,r.select_model,a)},expression:"requirement[template.select_model]"}})]},proxy:!0}],null,!0),model:{value:t[r.input_model],callback:function(a){e.$set(t,r.input_model,a)},expression:"requirement[template.input_model]"}})],1):e._e(),"toggle"==r.variety?a("span",[a("q-toggle",{style:r.style,attrs:{"true-value":1,"false-value":0,label:r.label||"Active",color:"green"},model:{value:t[r.model],callback:function(a){e.$set(t,r.model,a)},expression:"requirement[template.model]"}})],1):e._e(),"check"==r.variety?a("span",[a("q-checkbox",{style:r.style,attrs:{"true-value":1,"false-value":0,label:r.label,color:"green"},model:{value:t[r.model],callback:function(a){e.$set(t,r.model,a)},expression:"requirement[template.model]"}})],1):e._e()])})),0)})),0)],1),a("q-separator"),a("q-card-actions",{staticClass:"row"},[a("div",{staticClass:"col-12"},e._l(e.dialog.actions,(function(t,r){return a("q-btn",{key:r,class:t.class,attrs:{flat:t.flat,disable:e.loading,label:t.label,color:t.color,icon:t.icon,dense:""},on:{click:function(a){return e.actions(t)}}})})),1)]),a("q-inner-loading",{attrs:{showing:e.loading}},[a("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1)],1)],1)])},m=[];function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={props:{user:{},dialog:{required:!0},addFormLabel:{},dataWithParams:{},dataId:{},self:{}},computed:{show:function(){return this.dialog.show},error:function(){return this.$store.getters.error}},data:function(){return{loading:!1}},methods:{runs:function(e,t){var a=this;return u()(l.a.mark((function r(){var n,o;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=1,!e){r.next=11;break}o=0;case 3:if(!(o<e.length)){r.next=11;break}if(!n){r.next=8;break}return r.next=7,a[e[o].method](e[o].params,t);case 7:n=r.sent;case 8:o++,r.next=3;break;case 11:case"end":return r.stop()}}),r)})))()},closePopup:function(){return this.error.reset(),this.dialog.show=!1,1},actions:function(e){return this.runs(e.onClick),1},onSubmit:function(){for(var e=this.dialog,t=0;t<e.requirements.length;t++){for(var a=0;a<e.template.length;a++)e.template[a].setValueToTool&&(e.requirements[t][e.template[a].model]=this.toolGetterReverse(e.template[a],e.requirements[t]));this.runs(e.onSubmit,e.requirements[t])}return 1},onDelete:function(){for(var e=0;e<this.dialog.requirements.length;e++)this.runs(this.dialog.onDelete,this.dialog.requirements[e]);return 1},dispatch:function(e,t){var a=this;return u()(l.a.mark((function r(){return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.loading=!0,r.prev=1,r.t0=e.type,r.next="custom"===r.t0?5:"target"===r.t0?8:16;break;case 5:return r.next=7,a.$store.dispatch(e.dispatch,t);case 7:return r.abrupt("break",18);case 8:if(!a.dialog.withPagination){r.next=13;break}return r.next=11,a.$store.dispatch(e.dispatch,f({},a.getTarget(e),{},a.self.pagination));case 11:r.next=15;break;case 13:return r.next=15,a.$store.dispatch(e.dispatch,a.getTarget(e));case 15:return r.abrupt("break",18);case 16:return r.next=18,a.$store.dispatch(e.dispatch);case 18:return r.abrupt("return",1);case 21:return r.prev=21,r.t1=r["catch"](1),r.abrupt("return");case 24:return r.prev=24,a.loading=!1,r.finish(24);case 27:case"end":return r.stop()}}),r,null,[[1,21,24,27]])})))()},keying:function(e){var t=this.getTarget(e.target.array),a=this.getTarget(e.value);if(e.single)e.target.setValue({array:t,value:a});else for(var r=0;r<t.length;r++)e.target.setValue({array:t[r],value:a});return 1},getTarget:function(e){for(var t=this,a=0;a<e.target.length;a++)t=t[e.target[a]];return t},clearOnTarget:function(e){var t=this;return u()(l.a.mark((function a(){return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getTarget(e).splice(0,t.getTarget(e).length);case 2:return a.abrupt("return",1);case 3:case"end":return a.stop()}}),a)})))()},pushStateToTarget:function(e){var t=this;return u()(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.dialog.template)for(r=0;r<t.dialog.template.length;r++)t.dialog.template[r].setValueToTool&&(t.$store.getters[e.state][t.dialog.template[r].model]=t.toolGetter(t.dialog.template[r],t.$store.getters[e.state]));return a.next=3,t.getTarget(e).push(t.$store.getters[e.state]);case 3:return a.abrupt("return",1);case 4:case"end":return a.stop()}}),a)})))()},toolGetter:function(e,t){var a=this.$store.getters[e.options.getters].find((function(a){return a[e.optionValue]==t[e.model]})),r=e.options;return r&&a?a[e.optionLabel]:t[e.model]},toolGetterReverse:function(e,t){var a=this.$store.getters[e.options.getters].find((function(a){return a[e.optionLabel]==t[e.model]})),r=e.options;return r&&a?a[e.optionValue]:t[e.model]},getBasis:function(e,t){var a=e[t.options.basis]?this.$store.getters[t.options.getters].filter((function(a){return a.id==e[t.options.basis]}))[0][t.options.key]:[];return a},createRequirement:function(){for(var e={},t=0;t<this.dialog.template.length;t++)e[this.dialog.template[t].model]=void 0!==this.dialog.template[t].defaultValue?this.dialog.template[t].defaultValue:"";return this.dialog.requirements.push(e),1}},watch:{show:function(){this.show&&this.runs(this.dialog.onShow)}}},h=b,y=a("2877"),v=a("eebe"),k=a.n(v),q=a("24e8"),w=a("f09f"),x=a("a370"),_=a("eb85"),O=a("9564"),D=a("4b7e"),$=a("9c40"),C=a("0378"),P=a("27f9"),j=a("0016"),S=a("7cbe"),Q=a("52ee"),T=a("ddd8"),F=a("8f8e"),V=a("74f7"),L=a("cf57"),I=Object(y["a"])(h,p,m,!1,null,null,null),W=I.exports;function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}k()(I,"components",{QDialog:q["a"],QCard:w["a"],QCardSection:x["a"],QSeparator:_["a"],QToggle:O["a"],QCardActions:D["a"],QBtn:$["a"],QForm:C["a"],QInput:P["a"],QIcon:j["a"],QPopupProxy:S["a"],QDate:Q["a"],QSelect:T["a"],QCheckbox:F["a"],QInnerLoading:V["a"],QSpinnerGears:L["a"]});var B={components:{Dialog:W},props:["user","table","data","label","customClass","addLabel","addFormLabel","dataId","dataWithParams"],computed:{computedData:function(){return this.$store.getters[this.table.computedData]||[]}},data:function(){return{loading:!1,filter:"",pagination:{sortBy:"",descending:0,page:1,rowsPerPage:10,rowsNumber:10}}},mounted:function(){var e=this;return u()(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.table.sync?(e.getData=Object(d["a"])(e.getData,500),e.getData({pagination:e.pagination})):e.getData();case 1:case"end":return t.stop()}}),t)})))()},methods:{onRequest:function(e){this.table.sync&&(this.pagination=e.pagination,this.table.pagination=e.pagination,this.getData({pagination:this.pagination}))},getData:function(e){var t=this;return u()(l.a.mark((function a(){return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.loading=!0,a.prev=1,!t.table.sync){a.next=15;break}if(e.pagination.descending=e.pagination.descending?1:0,!t.table.syncWithParams){a.next=9;break}return a.next=7,t.$store.dispatch(t.table.getData,R({id:t.dataWithParams,search:t.filter},e.pagination));case 7:a.next=11;break;case 9:return a.next=11,t.$store.dispatch(t.table.getData,R({search:t.filter},e.pagination));case 11:t.pagination=e.pagination,t.table.pagination=e.pagination,a.next=22;break;case 15:if(!t.table.getDataWithParams){a.next=20;break}return a.next=18,t.$store.dispatch(t.table.getData,t.dataWithParams);case 18:a.next=22;break;case 20:return a.next=22,t.$store.dispatch(t.table.getData);case 22:a.next=27;break;case 24:return a.prev=24,a.t0=a["catch"](1),a.abrupt("return");case 27:return a.prev=27,t.loading=!1,a.finish(27);case 30:case"end":return a.stop()}}),a,null,[[1,24,27,30]])})))()},toolGetter:function(e,t){var a=this.$store.getters[e.tool.getter].find((function(a){return a[e.tool.key]==t.row[e.field]})),r=e.tool;return r&&a?a[r.value]:""},getBasis:function(e,t){var a=t.basing,r=e.row[a.basis],n=this.$store.getters[a.getters],o=r&&n&&n.filter((function(e){return e.id==r}))[0]&&n.filter((function(e){return e.id==r}))[0][a.key].filter((function(r){return r[a.find]==e.row[t.field]}))[0]?n.filter((function(e){return e.id==r}))[0][a.key].filter((function(r){return r[a.find]==e.row[t.field]}))[0][a.value]:"";return o}},watch:{computedData:function(){if(this.table.sync){var e=this.$store.getters[this.table.computedData];this.pagination.rowsNumber=e.total}}}},G=B,Y=a("eaac"),z=a("bd08"),M=a("db86"),N=a("05c0"),A=Object(y["a"])(G,r,n,!1,null,null,null);t["a"]=A.exports;k()(A,"components",{QTable:Y["a"],QBtn:$["a"],QInput:P["a"],QIcon:j["a"],QTr:z["a"],QTd:M["a"],QTooltip:N["a"]})}}]);