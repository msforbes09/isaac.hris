(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{1189:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-card",{staticClass:"q-pa-lg"},[r("div",{staticClass:"text-h4 q-mb-md text-grey-6"},[r("q-btn",{staticClass:"q-mr-sm",staticStyle:{"margin-top":"-7px"},attrs:{icon:"keyboard_arrow_left",color:"grey-5",to:{name:"applicant"},disable:e.loading,dense:""}}),e._v("\n      Add Applicant\n    ")],1),r("q-stepper",{ref:"stepper",attrs:{"done-color":"primary","active-color":"grey","inactive-color":"grey-6",animated:""},on:{transition:e.eventStepped},model:{value:e.form.stepNavigation,callback:function(t){e.$set(e.form,"stepNavigation",t)},expression:"form.stepNavigation"}},e._l([e.form.steps[0]],(function(t,n){return r("q-step",{key:n,attrs:{name:t.number,title:t.name,icon:t.icon,done:t.done,error:e.checkStepError(t)}},[e._l(t.requirements,(function(n,a){return r("q-form",{key:a,staticClass:"q-col-gutter-md row"},[e._l(t.type.template,(function(t,a){return r("div",{key:a,class:t.class},["date"==t.type?r("span",[r("q-input",{attrs:{label:t.label,error:e.error.has(t.name),"error-message":e.error.get(t.name),mask:t.mask},on:{blur:e.checkAllRequiredDone,focus:function(r){return e.error.clear(t.name)}},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",[r("q-date",{attrs:{"default-year-month":t.defaultYearMonth,mask:"YYYY-MM-DD","lazy-rule":"",rules:["date"]},model:{value:n[t.model],callback:function(r){e.$set(n,t.model,r)},expression:"requirement[template.model]"}})],1)],1)]},proxy:!0}],null,!0),model:{value:n[t.model],callback:function(r){e.$set(n,t.model,r)},expression:"requirement[template.model]"}})],1):"select"==t.type?r("span",[r("q-select",{attrs:{options:e.getTools(t.select_name,t.select_type),label:t.label,error:e.error.has(t.name),"error-message":e.error.get(t.name)},on:{blur:e.checkAllRequiredDone,change:function(r){return e.error.clear(t.name)}},model:{value:n[t.model],callback:function(r){e.$set(n,t.model,r)},expression:"requirement[template.model]"}})],1):r("span",[r("q-input",{attrs:{disable:e.loading||t.disabled,label:t.label,error:e.error.has(t.name),"error-message":e.error.get(t.name),mask:t.mask,"fill-mask":t.mask?"#":"","unmasked-value":""},on:{blur:e.checkAllRequiredDone,change:function(r){return e.error.clear(t.name)}},model:{value:n[t.model],callback:function(r){e.$set(n,t.model,r)},expression:"requirement[template.model]"}})],1)])})),t.extendable&&t.requirements.length-1!=a?r("div",{staticClass:"col-12 q-mb-lg q-mt-sm q-pa-xl"},[r("q-separator",{staticStyle:{width:"250px",margin:"0px auto"}})],1):e._e()],2)})),t.extendable?r("div",{staticClass:"col-12 q-my-xl column"},[r("q-btn",{staticClass:"self-center",attrs:{color:"secondary",label:t.addFormLabel,icon:"add"},on:{click:function(r){return e.addForm(t)}}})],1):e._e(),r("q-stepper-navigation",[r("q-btn",{attrs:{disable:e.loading||1==e.form.stepNavigation,label:"Back",icon:"arrow_back_ios",color:"grey-7"},on:{click:function(t){e.form.stepNavigation=e.form.stepNavigation-1}}}),r("q-btn",{staticClass:"q-ml-sm",attrs:{disable:e.loading||1==e.form.stepNavigation,icon:"arrow_forward_ios",label:"Next",color:"grey-7"},on:{click:function(t){e.form.stepNavigation=e.form.stepNavigation+1}}}),r("q-btn",{staticClass:"q-ml-sm",attrs:{disable:!e.form.requiredDone||e.loading,label:"Save Applicant",icon:"save",color:"green"},on:{click:e.store}}),r("q-btn",{staticClass:"q-ml-sm float-right",attrs:{disable:e.loading,label:"Cancel Applicant",icon:"delete",color:"grey-5"},on:{click:e.cancel}})],1)],2)})),1)],1)],1)},a=[],o=(r("8e6e"),r("8a81"),r("456d"),r("c47a")),s=r.n(o),i=(r("c5f6"),r("7cdf"),r("7f7f"),r("7514"),r("967e")),l=r.n(i),c=(r("96cf"),r("fa84")),u=r.n(c);r("ac6a"),r("cadf"),r("06db");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={computed:{form:function(){return this.$store.getters["applicant/form"]},error:function(){return this.$store.getters.error},keys:function(){var e=this.$store.getters["tools/applicants"]||[];return e.keys}},data:function(){return{loading:!1}},mounted:function(){this.form.stepNavigation=1,this.clearForm()},methods:{clearForm:function(){var e=this;return u()(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("applicant/clearForm",e.form.steps);case 2:e.form.steps=t.sent;case 3:case"end":return t.stop()}}),t)})))()},confirm:function(e){this.$q.dialog({title:"Confirm",message:e.message,cancel:!0,persistent:!0}).onOk((function(){e.function()}))},cancel:function(){var e=this;this.confirm({message:"Are you sure you want to cancel Adding Applicant?",function:function(){e.$router.push({name:"applicant"})}})},getTools:function(e,t){if("select_tree"==t){if(this.keys.length>0)return this.keys.find((function(t){return t.name==e})).keywords.map((function(e){return e.value}))}else if(this.keys.length>0)return this.keys.find((function(t){return t.name==e})).keywords.map((function(e){return e.value}))},store:function(){var e=this;return u()(l.a.mark((function t(){var r,n,a,o,s,i,c,u,p,m,f;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:e.loading=!0,t.prev=3,r=-1,n=[e.form.steps[0]],a=0;case 7:if(!(a<n.length)){t.next=27;break}o=n[a],s=o.requirements,i=0;case 11:if(!(i<s.length)){t.next=24;break}for(c=0,u=o.type.template,p=0;p<u.length;p++)m=u[p],c+=s[i][m.model]?1:0;if(!(c>0)){t.next=20;break}return t.next=18,e.$store.dispatch("applicant/store",{url:o.url_store,submit:s[i],form:o.form,id:r});case 18:f=t.sent,r=o.init?f.applicant.id:r;case 20:e.addForm(o);case 21:i++,t.next=11;break;case 24:a++,t.next=7;break;case 27:e.$router.push({name:"applicant-edit",params:{id:r}}),t.next=33;break;case 30:return t.prev=30,t.t0=t["catch"](3),t.abrupt("return");case 33:return t.prev=33,e.loading=!1,t.finish(33);case 36:case"end":return t.stop()}}),t,null,[[3,30,33,36]])})))()},checkAllRequiredDone:function(){for(var e=0,t=0;t<this.form.steps.length;t++)for(var r=this.form.steps[t].requirements,n=0;n<r.length;n++)r[n].required&&(e+=r[n].model.length?0:1);this.form.requiredDone=0==e},checkAllDone:function(){for(var e=0;e<this.form.steps.length;e++){for(var t=this.form.steps[e].type,r=0,n=this.form.steps[e].requirements,a=0;a<n.length;a++)for(var o=0;o<t.template.length;o++){var s=n[a][t.template[o].model];r+=s.length||Number.isInteger(s)?0:1}this.form.steps[e].done=0==r}},eventStepped:function(){this.checkAllDone(),this.checkAllRequiredDone()},checkStepDone:function(e){for(var t=!1,r=0;r<e.length;r++)t+=e[r].model.length?1:0;return t==e.length},checkStepError:function(e){for(var t=0,r=0;r<e.requirements.length;r++)t+=this.error.has(e.requirements[r].name)?1:0;return t>0},addForm:function(e){if(e.extendable&&-1!=e.requirements[e.requirements.length-1].id){for(var t={},r=0;r<e.type.template.length;r++)t[e.type.template[r].model]="";e.requirements.push(m({},t,{id:-1}))}}}},d=f,h=r("2877"),g=r("eebe"),b=r.n(g),v=r("f09f"),k=r("9c40"),q=r("f531"),y=r("87fe"),x=r("0378"),w=r("27f9"),O=r("0016"),_=r("7cbe"),D=r("52ee"),S=r("ddd8"),A=r("eb85"),C=r("b19c"),$=Object(h["a"])(d,n,a,!1,null,null,null);t["default"]=$.exports;b()($,"components",{QCard:v["a"],QBtn:k["a"],QStepper:q["a"],QStep:y["a"],QForm:x["a"],QInput:w["a"],QIcon:O["a"],QPopupProxy:_["a"],QDate:D["a"],QSelect:S["a"],QSeparator:A["a"],QStepperNavigation:C["a"]})}}]);