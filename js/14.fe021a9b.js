(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"9f37":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-card",{staticClass:"q-pa-lg"},[r("div",{staticClass:"text-h4 q-mb-md text-grey-6"},[r("q-btn",{staticClass:"q-mr-sm",staticStyle:{"margin-top":"-7px"},attrs:{disable:e.loading||e.error.any(),color:"grey-5",to:{name:"applicant"},icon:"keyboard_arrow_left",dense:""}}),e._v("\n      Edit Applicant\n      "),e.loading?r("q-spinner",{staticClass:"self-center",attrs:{color:"grey",size:"1em"}}):e._e()],1),r("q-stepper",{ref:"stepper",attrs:{"done-color":"green","active-color":"warning","inactive-color":"grey-6",animated:"","header-nav":""},on:{transition:e.eventStepped},model:{value:e.form.stepNavigation,callback:function(t){e.$set(e.form,"stepNavigation",t)},expression:"form.stepNavigation"}},e._l(e.form.steps,(function(t,n){return r("q-step",{key:n,attrs:{disable:e.loading,name:t.number,title:t.name,icon:t.icon,done:t.done,error:e.checkStepError(t)}},[e.initLoading?e._e():r("div",e._l(t.requirements,(function(n,a){return r("q-form",{key:a,staticClass:"q-col-gutter-md row"},[e._l(t.type.template,(function(a,o){return r("div",{directives:[{name:"show",rawName:"v-show",value:!a.hidden,expression:"!template.hidden"}],key:o,class:a.class},["date"==a.type?r("span",[r("q-input",{attrs:{label:a.label,error:e.inputCheckError({template:a,requirement:n,step:t}),"error-message":e.error.get(a.name),disable:e.inputCheckDisable({step:t,requirement:n}),mask:a.mask},on:{blur:e.checkAllRequiredDone,focus:function(t){return e.error.clear(a.name)}},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",[r("q-date",{attrs:{"default-year-month":a.defaultYearMonth,rules:["date"],mask:"YYYY-MM-DD","lazy-rule":""},model:{value:n[a.model],callback:function(t){e.$set(n,a.model,t)},expression:"requirement[template.model]"}})],1)],1)]},proxy:!0}],null,!0),model:{value:n[a.model],callback:function(t){e.$set(n,a.model,t)},expression:"requirement[template.model]"}})],1):"boolean-checkbox"==a.type?r("span",[r("q-checkbox",{staticClass:"q-mt-sm",attrs:{label:a.label,"true-value":1,"false-value":0,color:"green"},model:{value:n[a.model],callback:function(t){e.$set(n,a.model,t)},expression:"requirement[template.model]"}})],1):"select"==a.type?r("span",[r("q-select",{attrs:{disable:e.inputCheckDisable({step:t,requirement:n}),label:a.label,error:e.inputCheckError({template:a,requirement:n,step:t}),"error-message":e.error.get(a.name),options:e.getTools(a),"option-value":a.option?a.option.value:null,"option-label":a.option?a.option.label:null,"emit-value":"","map-options":""},on:{blur:function(t){e.checkAllRequiredDone,e.error.clear(a.name)},focus:function(t){return e.error.clear(a.name)},input:function(r){return e.checkSelect({step:t,requirement:n,template:a})}},model:{value:n[a.model],callback:function(t){e.$set(n,a.model,t)},expression:"requirement[template.model]"}})],1):"input-select"==a.type?r("span",[r("q-input",{attrs:{label:a.label,error:e.inputCheckError({template:a,requirement:n,step:t}),"error-message":e.error.get(a.name),mask:a.mask,"fill-mask":a.mask?"#":"",disable:e.inputCheckDisable({step:t,requirement:n})},on:{blur:e.checkAllRequiredDone,change:function(t){e.error.clear(a.name),n[a.model]=a.mask_model(n,a)},keydown:function(t){e.error.clear(a.name),n[a.model]=a.mask_model(n,a)}},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-select",{attrs:{disable:e.inputCheckDisable({step:t,requirement:n}),options:e.getTools(a)},on:{blur:function(t){e.checkAllRequiredDone,n[a.model]=a.mask_model(n,a)},focus:function(t){e.error.clear(a.name),n[a.model]=a.mask_model(n,a)}},model:{value:n[a.select_model],callback:function(t){e.$set(n,a.select_model,t)},expression:"requirement[template.select_model]"}})]},proxy:!0}],null,!0),model:{value:n[a.input_model],callback:function(t){e.$set(n,a.input_model,t)},expression:"requirement[template.input_model]"}})],1):r("span",[r("q-input",{attrs:{disable:e.inputCheckDisable({step:t,requirement:n})||e.loading||a.disabled,label:a.label,error:e.inputCheckError({template:a,requirement:n,step:t}),"error-message":e.error.get(a.name),mask:a.mask,"fill-mask":a.mask?"#":"",maxlength:a.max},on:{blur:e.checkAllRequiredDone,change:function(t){return e.error.clear(a.name)},keydown:function(t){return e.error.clear(a.name)}},model:{value:n[a.model],callback:function(t){e.$set(n,a.model,t)},expression:"requirement[template.model]"}})],1)])})),r("div",{staticClass:"col-12 q-mb-xl"},[r("q-btn",{attrs:{disable:e.error.any(),label:"Save",icon:"save",color:"positive"},on:{click:function(r){return e.save(t.form,n.id)}}}),t.noDelete||-1==n.id?e._e():r("q-btn",{staticClass:"q-ml-md",attrs:{disable:e.error.any(),label:"Delete",icon:"delete",color:"negative"},on:{click:function(r){return e.removeForm(t.form,n.id)}}})],1)],2)})),1),r("q-stepper-navigation",[r("q-btn",{attrs:{disable:e.error.any()||e.loading||1==e.form.stepNavigation,label:"Back",icon:"arrow_back_ios",color:"grey-7"},on:{click:function(t){e.form.stepNavigation=e.form.stepNavigation-1}}}),r("q-btn",{staticClass:"q-ml-sm",attrs:{disable:e.error.any()||e.loading||e.form.stepNavigation==e.form.steps.length,icon:"arrow_forward_ios",label:"Next",color:"grey-7"},on:{click:function(t){e.form.stepNavigation=e.form.stepNavigation+1}}}),r("q-btn",{staticClass:"q-ml-sm float-right",attrs:{disable:e.loading,label:"Delete Applicant",icon:"delete",color:"negative"},on:{click:e.remove}})],1)],1)})),1)],1),r("q-btn",{on:{click:function(t){return e.toolParenting()}}})],1)},a=[],o=(r("8e6e"),r("8a81"),r("c5f6"),r("7cdf"),r("c47a")),i=r.n(o),s=(r("28a5"),r("456d"),r("6762"),r("2fdb"),r("ac6a"),r("cadf"),r("06db"),r("7514"),r("7f7f"),r("967e")),l=r.n(s),c=(r("96cf"),r("fa84")),u=r.n(c);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={computed:{form:function(){return this.$store.getters["applicant/form"]},error:function(){return this.$store.getters.error},tools:function(){return this.$store.getters["tools/applicants"]||[]}},data:function(){return{id:this.$route.params.id,initLoading:!1,loading:!1}},mounted:function(){var e=this;return u()(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.stepNavigation=1,t.next=3,e.$store.dispatch("applicant/clearForm",e.form.steps);case 3:e.form.steps=t.sent,e.initLoading=!0,e.getApplicant();case 6:case"end":return t.stop()}}),t)})))()},methods:{inputCheckError:function(e){var t=this.error;return t.has(e.template.name)&&(t.requestName==e.requirement.id||t.requestName==e.step.form)&&this.form.focusId==e.requirement.id},inputCheckDisable:function(e){var t=this.error;return this.loading||t.any()&&(-1==e.requirement.id?t.requestName!=e.step.form:this.form.focusId!=e.requirement.id)},confirm:function(e){this.$q.dialog({title:"Confirm",message:e.message,cancel:!0,persistent:!0}).onOk((function(){e.function()}))},remove:function(){var e=this;this.confirm({message:"Are you sure you want to delete Applicant?",function:function(){var t=u()(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,t.next=6,e.$store.dispatch("applicant/remove",e.id);case 6:return e.$router.push({name:"applicant"}),t.abrupt("return");case 10:return t.prev=10,t.t0=t["catch"](3),t.abrupt("return");case 13:return t.prev=13,e.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[3,10,13,16]])})));function r(){return t.apply(this,arguments)}return r}()})},checkStepError:function(e){for(var t=0,r=0;r<e.requirements.length;r++)for(var n=0;n<e.type.template.length;n++){var a=e.type.template;t+=a.length>0&&this.error.has(e.requirements[r][a.name])?1:0}return t>0},toolParenting:function(){console.log("this.form.steps[4].requirements"),console.log(this.form.steps[4].requirements)},getFormValue:function(e){var t=0;return this.form.steps.forEach((function(r){r.requirements.forEach((function(r){r[e]&&(t=r[e])}))})),t},selectClearChildren:function(e){for(var t=this,r=e.template,n=this.form.steps,a=0;a<n.length;a++)for(var o=n[a],i=o.type.template,s=o.requirements,l=0;l<s.length;l++)for(var c=s[l],u=0;u<i.length;u++){var p,m,f,d,h=i[u];if(o.id==e.step.id&&c.id==e.requirement.id&&r.model==h.model)(function(){var e=r.tools;for(p=0;p<i.length;p++)m=i[p].tools,f=i[p].model,m&&m.parent&&(d=m.parent.find((function(t){return t.name==e.name&&t.ref==e.ref})),d&&(t.form.steps[a].requirements[l][f]=""))})()}},checkSelect:function(e){e.template.tools&&this.selectClearChildren(e)},getTools:function(e){var t=this,r=[];if(this.tools)if(e.tools){var n=e.tools;if(n.parent){var a=this.tools;n.parent.forEach((function(o){if(a[o.name]&&t.getFormValue(o.id)){var i=a[o.name].find((function(e){return e.id==t.getFormValue(o.id)}));if(i[n.name]){var s=i[n.name];r=s.map((function(t){return e.option?t:t.name}))}}}))}else if(this.tools[n.name]){var o=this.tools[n.name];r=o.map((function(t){return e.option?t:t.name}))}}else this.tools.keys.length>0&&(r=this.tools.keys.find((function(t){return t.name==e.select_name})).keywords.map((function(e){return e.value})));return r},getInputSelects:function(e){return e.type.template.filter((function(e){return"input-select"==e.type}))},checkAutoFills:function(e){var t=e.autoFill,r="";if(t){r=this.$store.getters[t.getters];for(var n=0;n<t.property.length;n++)r=r[t.property[n]]}else r=e.defaultValue>-1?e.defaultValue:"";return r},noObject:function(e){return"object"==e.step.returnType?[e.res]:e.res},getApplicant:function(){var e=this;return u()(l.a.mark((function t(){var r,n,a,o,i,s,c,u,p;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:e.loading=!0,t.prev=3,r=e.form.steps,n=0;case 6:if(!(n<r.length)){t.next=18;break}return a=r[n],t.next=10,e.$store.dispatch("applicant/getApplicant",{url:a.url_get,form:a.form,id:e.id});case 10:if(o=t.sent,o=e.noObject({step:a,res:o}),a.requirements=[],o.length>0)for(i=0;i<o.length;i++)s=e.getInputSelects(a),s.forEach((function(e){if(Object.keys(o[i]).includes(e.model)){var t=o[i][e.model].split(" ");o[i][e.select_model]=t[t.length-1],o[i][e.input_model]=t.shift()}})),a.requirements.push(o[i]);else{for(c={},u=0;u<a.type.template.length;u++)p=a.type.template[u],c[p.model]=e.checkAutoFills(p);a.requirements.push(m({},c,{id:-1}))}e.addForm(a);case 15:n++,t.next=6;break;case 18:t.next=23;break;case 20:return t.prev=20,t.t0=t["catch"](3),t.abrupt("return");case 23:return t.prev=23,e.loading=!1,e.initLoading=!1,t.finish(23);case 27:case"end":return t.stop()}}),t,null,[[3,20,23,27]])})))()},save:function(e,t){var r=this;return u()(l.a.mark((function n(){var a,o,i,s,c,u,p,m;return l.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r.loading){n.next=2;break}return n.abrupt("return");case 2:r.loading=!0,n.prev=3,r.form.focusId=t,a=0;case 6:if(!(a<r.form.steps.length)){n.next=40;break}if(o=r.form.steps[a],i=o.requirements,o.form!=e){n.next=37;break}s=0;case 11:if(!(s<i.length)){n.next=37;break}for(c=0,u=0;u<o.type.template.length;u++)p=o.type.template[u],c+=i[s][p.model]?1:0;if(i[s].id!=t){n.next=34;break}if(-1!=i[s].id&&"undefined"!==typeof i[s].id){n.next=31;break}if(!(c>0)){n.next=29;break}return n.prev=17,n.next=20,r.$store.dispatch("applicant/store",{url:o.url_store,submit:i[s],form:o.form,id:r.id});case 20:m=n.sent,r.form.steps[a].requirements.splice(s,1),r.form.steps[a].requirements.push(m[o.apiResponse]),r.addForm(r.form.steps[a]),n.next=29;break;case 26:return n.prev=26,n.t0=n["catch"](17),n.abrupt("return");case 29:n.next=34;break;case 31:if(!(c>0)){n.next=34;break}return n.next=34,r.$store.dispatch("applicant/update",{url:o.url_update,submit:i[s],form:o.form,id:r.id});case 34:s++,n.next=11;break;case 37:a++,n.next=6;break;case 40:n.next=45;break;case 42:return n.prev=42,n.t1=n["catch"](3),n.abrupt("return");case 45:return n.prev=45,r.loading=!1,n.finish(45);case 48:case"end":return n.stop()}}),n,null,[[3,42,45,48],[17,26]])})))()},removeForm:function(e,t){var r=this;return u()(l.a.mark((function n(){return l.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r.confirm({message:"Are you sure you want to delete this item?",function:function(){var n=u()(l.a.mark((function n(){var a,o,i,s;return l.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r.loading){n.next=2;break}return n.abrupt("return");case 2:r.loading=!0,n.prev=3,r.form.focusId=t,a=0;case 6:if(!(a<r.form.steps.length)){n.next=22;break}if(o=r.form.steps[a],i=o.requirements,o.form!=e){n.next=19;break}s=0;case 11:if(!(s<i.length)){n.next=19;break}if(i[s].id!=t){n.next=16;break}return n.next=15,r.$store.dispatch("applicant/removeForm",m({},i[s],{form:o.form}));case 15:r.form.steps[a].requirements.splice(s,1);case 16:s++,n.next=11;break;case 19:a++,n.next=6;break;case 22:n.next=27;break;case 24:return n.prev=24,n.t0=n["catch"](3),n.abrupt("return");case 27:return n.prev=27,r.loading=!1,n.finish(27);case 30:case"end":return n.stop()}}),n,null,[[3,24,27,30]])})));function a(){return n.apply(this,arguments)}return a}()});case 1:case"end":return n.stop()}}),n)})))()},checkAllRequiredDone:function(){for(var e=0,t=0;t<this.form.steps.length;t++)for(var r=this.form.steps[t].requirements,n=0;n<r.length;n++)r[n].required&&(e+=r[n].model.length?0:1);this.form.requiredDone=0==e},checkAllDone:function(){for(var e=0;e<this.form.steps.length;e++){for(var t=this.form.steps[e].type,r=0,n=this.form.steps[e].requirements,a=0;a<n.length;a++)for(var o=0;o<t.template.length;o++){var i=n[a][t.template[o].model];i=null===i?"":i,r+=i.length||Number.isInteger(i)?0:1}this.form.steps[e].done=0==r}},eventStepped:function(){this.checkAllDone(),this.checkAllRequiredDone()},checkStepDone:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].model.length?0:1;return 0==t},addForm:function(e){if(e.extendable&&-1!=e.requirements[e.requirements.length-1].id){for(var t={},r=0;r<e.type.template.length;r++){var n=e.type.template[r];t[n.model]=this.checkAutoFills(n)}e.requirements.push(m({},t,{id:-1}))}}}},d=f,h=r("2877"),b=r("eebe"),g=r.n(b),v=r("f09f"),k=r("9c40"),q=r("0d59"),y=r("f531"),x=r("87fe"),w=r("0378"),_=r("27f9"),C=r("0016"),D=r("7cbe"),O=r("52ee"),$=r("8f8e"),A=r("ddd8"),S=r("b19c"),N=Object(h["a"])(d,n,a,!1,null,null,null);t["default"]=N.exports;g()(N,"components",{QCard:v["a"],QBtn:k["a"],QSpinner:q["a"],QStepper:y["a"],QStep:x["a"],QForm:w["a"],QInput:_["a"],QIcon:C["a"],QPopupProxy:D["a"],QDate:O["a"],QCheckbox:$["a"],QSelect:A["a"],QStepperNavigation:S["a"]})}}]);